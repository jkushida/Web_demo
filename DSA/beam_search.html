<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ“ãƒ¼ãƒ æ¢ç´¢ã®å¯è¦–åŒ–</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .node {
            transition: all 0.5s ease;
            z-index: 10;
        }
        .node.selected {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
        }
        .node.eliminated {
            opacity: 0.3;
            transform: scale(0.95);
        }
        .edge {
            transition: all 0.5s ease;
        }
        .edge.active {
            stroke-width: 3;
            stroke: #3b82f6;
        }
        #canvas {
            position: relative;
        }
        #svg {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        #nodes {
            position: relative;
            z-index: 2;
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-4xl font-bold text-center mb-2 text-gray-800">ãƒ“ãƒ¼ãƒ æ¢ç´¢ã®å¯è¦–åŒ–</h1>
        <p class="text-center text-gray-600 mb-8">ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆã«ãŠã‘ã‚‹ãƒ“ãƒ¼ãƒ æ¢ç´¢ã®å‹•ä½œã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†</p>
        
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4 text-gray-800">ğŸ” æ¢ç´¢ã‚·ãƒŠãƒªã‚ª</h2>
            <p class="text-gray-700 mb-4">
                ã“ã®ãƒ‡ãƒ¢ã§ã¯ã€<strong>ã€ŒIã€</strong>ã§å§‹ã¾ã‚‹æ–‡ã‚’ç”Ÿæˆã—ã¾ã™ã€‚å„ã‚¹ãƒ†ãƒƒãƒ—ã§æ¬¡ã®å˜èªã®å€™è£œã‹ã‚‰é¸æŠã—ã¦ã„ãã¾ã™ã€‚
            </p>
            
            <div class="grid md:grid-cols-3 gap-4 mb-4">
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                    <h3 class="font-bold text-blue-800 mb-2">ğŸ”¹ ã‚¹ãƒ†ãƒƒãƒ—1ã®å€™è£œ</h3>
                    <div class="text-sm space-y-1">
                        <div><span class="font-mono bg-white px-2 py-1 rounded">love</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -0.5)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">like</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -1.2)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">want</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -1.5)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">need</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -1.8)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">have</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -2.0)</span></div>
                    </div>
                </div>
                
                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                    <h3 class="font-bold text-green-800 mb-2">ğŸ”¹ ã‚¹ãƒ†ãƒƒãƒ—2ã®å€™è£œ</h3>
                    <div class="text-sm space-y-1">
                        <div><span class="font-mono bg-white px-2 py-1 rounded">you</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -0.3)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">it</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -0.8)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">cats</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -1.0)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">dogs</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -1.2)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">music</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -1.5)</span></div>
                    </div>
                </div>
                
                <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                    <h3 class="font-bold text-purple-800 mb-2">ğŸ”¹ ã‚¹ãƒ†ãƒƒãƒ—3ã®å€™è£œ</h3>
                    <div class="text-sm space-y-1">
                        <div><span class="font-mono bg-white px-2 py-1 rounded">very</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -0.4)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">so</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -0.6)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">too</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -0.9)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">a</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -1.1)</span></div>
                        <div><span class="font-mono bg-white px-2 py-1 rounded">the</span> <span class="text-gray-600">(ã‚¹ã‚³ã‚¢: -1.3)</span></div>
                    </div>
                </div>
            </div>
            
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
                <p class="text-sm text-gray-700">
                    <strong>ğŸ’¡ é‡è¦ï¼š</strong> ã‚¹ã‚³ã‚¢ã¯<strong>å¯¾æ•°ç¢ºç‡</strong>ã‚’è¡¨ã—ã¦ãŠã‚Šã€0ã«è¿‘ã„ã»ã©é«˜ç¢ºç‡ã§ã™ï¼ˆä¾‹ï¼š-0.5 > -1.5ï¼‰ã€‚
                    å®Ÿéš›ã®è¨€èªãƒ¢ãƒ‡ãƒ«ã§ã¯ã€ã“ã‚Œã‚‰ã®ã‚¹ã‚³ã‚¢ã¯å˜èªã®å‡ºç¾ç¢ºç‡ã‹ã‚‰è¨ˆç®—ã•ã‚Œã¾ã™ã€‚
                    ç´¯ç©ã‚¹ã‚³ã‚¢ã¯è¦ªãƒãƒ¼ãƒ‰ã®ã‚¹ã‚³ã‚¢ + æ–°ã—ã„å˜èªã®ã‚¹ã‚³ã‚¢ã§è¨ˆç®—ã•ã‚Œã¾ã™ã€‚
                </p>
            </div>
            
            <div class="bg-gradient-to-r from-blue-100 to-purple-100 p-4 rounded-lg">
                <h3 class="font-bold text-gray-800 mb-2">ğŸ¯ ãƒ“ãƒ¼ãƒ æ¢ç´¢ã®å‹•ä½œ</h3>
                <ol class="list-decimal list-inside space-y-2 text-sm text-gray-700">
                    <li>å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã€<strong>é¸æŠã•ã‚ŒãŸã™ã¹ã¦ã®ãƒãƒ¼ãƒ‰</strong>ã‹ã‚‰5å€‹ã®å€™è£œã‚’ç”Ÿæˆ</li>
                    <li>ãƒ“ãƒ¼ãƒ å¹…ãŒ$k=2$ã®å ´åˆã€æœ€å¤§$2 \times 5 = 10$å€‹ã®å€™è£œãŒç”Ÿæˆã•ã‚Œã‚‹</li>
                    <li>ã™ã¹ã¦ã®å€™è£œã‚’<strong>ç´¯ç©ã‚¹ã‚³ã‚¢</strong>ã§ãƒ©ãƒ³ã‚¯ä»˜ã‘</li>
                    <li><strong>ä¸Šä½$k$å€‹ã®ã¿</strong>ã‚’æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚ã‚‹ï¼ˆãã‚Œä»¥å¤–ã¯ç°è‰²ã§é™¤å¤–ï¼‰</li>
                    <li>ã“ã‚Œã‚’ç¹°ã‚Šè¿”ã—ã¦æœ€çµ‚çš„ãªæ–‡ã‚’ç”Ÿæˆ</li>
                </ol>
            </div>
        </div>
        
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex flex-wrap gap-4 mb-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ãƒ“ãƒ¼ãƒ å¹… (k)</label>
                    <select id="beamWidth" class="border border-gray-300 rounded px-4 py-2">
                        <option value="1">1 (è²ªæ¬²æ¢ç´¢)</option>
                        <option value="2" selected>2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">æ¢ç´¢ã®æ·±ã•</label>
                    <select id="depth" class="border border-gray-300 rounded px-4 py-2">
                        <option value="2">2</option>
                        <option value="3" selected>3</option>
                        <option value="4">4</option>
                    </select>
                </div>
                <div class="flex items-end">
                    <button id="startBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded">
                        æ¢ç´¢é–‹å§‹
                    </button>
                </div>
                <div class="flex items-end">
                    <button id="resetBtn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded">
                        ãƒªã‚»ãƒƒãƒˆ
                    </button>
                </div>
            </div>
            
            <div id="status" class="text-center text-lg font-semibold mb-4 text-blue-600"></div>
            
            <div id="canvas" class="bg-gray-50 rounded-lg p-8 min-h-[500px] overflow-x-auto">
                <svg id="svg"></svg>
                <div id="nodes"></div>
            </div>
        </div>
        
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold mb-4 text-gray-800">ğŸ“š è©³ç´°èª¬æ˜</h2>
            
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div>
                    <h3 class="text-lg font-bold mb-3 text-gray-800">ğŸ¨ è‰²ã®æ„å‘³</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-start">
                            <span class="inline-block w-4 h-4 bg-blue-500 rounded mr-2 mt-1"></span>
                            <div><strong>é’è‰²ã®ãƒãƒ¼ãƒ‰</strong>: é¸æŠã•ã‚ŒãŸå€™è£œï¼ˆãƒ“ãƒ¼ãƒ å†…ã«æ®‹ã‚‹ï¼‰</div>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-4 h-4 bg-gray-400 rounded mr-2 mt-1"></span>
                            <div><strong>ç°è‰²ã®ãƒãƒ¼ãƒ‰</strong>: é™¤å¤–ã•ã‚ŒãŸå€™è£œï¼ˆã‚¹ã‚³ã‚¢ãŒä½ã„ï¼‰</div>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-4 h-4 bg-blue-500 rounded mr-2 mt-1"></span>
                            <div><strong>å¤ªã„é’ç·š</strong>: é¸æŠã•ã‚ŒãŸãƒ‘ã‚¹</div>
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold mb-3 text-gray-800">âš™ï¸ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li><strong>ãƒ“ãƒ¼ãƒ å¹… $k$</strong>: å„ã‚¹ãƒ†ãƒƒãƒ—ã§ä¿æŒã™ã‚‹å€™è£œã®æ•°</li>
                        <li><strong>$k=1$</strong>: è²ªæ¬²æ¢ç´¢ï¼ˆå¸¸ã«1ã¤ã®æœ€è‰¯ãƒ‘ã‚¹ã®ã¿ï¼‰</li>
                        <li><strong>$k$ãŒå¤§ãã„</strong>: ã‚ˆã‚Šå¤šãã®å¯èƒ½æ€§ã‚’æ¢ç´¢ã€è¨ˆç®—ã‚³ã‚¹ãƒˆå¢—</li>
                        <li><strong>æ¢ç´¢ã®æ·±ã•</strong>: ç”Ÿæˆã™ã‚‹å˜èªã®æ•°</li>
                    </ul>
                </div>
            </div>
            
            <div class="bg-gray-50 p-4 rounded-lg">
                <h3 class="text-lg font-bold mb-3 text-gray-800">ğŸ” å…·ä½“ä¾‹ã§ç†è§£ã™ã‚‹</h3>
                <p class="text-gray-700 mb-2">
                    <strong>ãƒ“ãƒ¼ãƒ å¹… $k=2$ ã®å ´åˆï¼š</strong>
                </p>
                <ul class="list-decimal list-inside space-y-2 text-gray-700 ml-4">
                    <li>ã‚¹ãƒ†ãƒƒãƒ—1: ã€ŒI loveã€(ã‚¹ã‚³ã‚¢: -0.5)ã¨ã€ŒI likeã€(ã‚¹ã‚³ã‚¢: -1.2)ã‚’é¸æŠ</li>
                    <li>ã‚¹ãƒ†ãƒƒãƒ—2: 2ã¤ã®å€™è£œ Ã— 5ã¤ã®æ¬¡å˜èª = 10å€‹ã®çµ„ã¿åˆã‚ã›ã‚’ç”Ÿæˆ
                        <ul class="list-disc list-inside ml-6 text-sm mt-1">
                            <li>ã€ŒI love youã€(ç´¯ç©: -0.8)ã€ã€ŒI love itã€(ã‚¹ã‚³ã‚¢: -1.3)ã€...</li>
                            <li>ã€ŒI like youã€(ã‚¹ã‚³ã‚¢: -1.5)ã€ã€ŒI like itã€(ã‚¹ã‚³ã‚¢: -2.0)ã€...</li>
                        </ul>
                    </li>
                    <li>ã“ã®10å€‹ã‹ã‚‰ç´¯ç©ã‚¹ã‚³ã‚¢ãŒæœ€ã‚‚é«˜ã„ä¸Šä½2å€‹ã®ã¿ã‚’é¸æŠ</li>
                    <li>é¸ã°ã‚Œãªã‹ã£ãŸ8å€‹ã¯ç°è‰²ã§è¡¨ç¤ºã•ã‚Œã€æ¢ç´¢ã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹</li>
                </ul>
            </div>
            
            <div class="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200">
                <p class="text-sm text-gray-700">
                    <strong>ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆï¼š</strong> ãƒ“ãƒ¼ãƒ æ¢ç´¢ã¯ã€å…¨æ¢ç´¢ï¼ˆè¨ˆç®—é‡ãŒæŒ‡æ•°çš„ã«å¢—ãˆã‚‹ï¼‰ã¨è²ªæ¬²æ¢ç´¢ï¼ˆå±€æ‰€æœ€é©è§£ã«é™¥ã‚Šã‚„ã™ã„ï¼‰ã®
                    ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã£ãŸæ‰‹æ³•ã§ã™ã€‚æ©Ÿæ¢°ç¿»è¨³ã‚„æ–‡ç« ç”Ÿæˆãªã©ã§ã€å“è³ªã¨é€Ÿåº¦ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’èª¿æ•´ã™ã‚‹ã®ã«ä½¿ã‚ã‚Œã¾ã™ã€‚
                </p>
            </div>
        </div>
    </div>

    <script>
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const beamWidthSelect = document.getElementById('beamWidth');
        const depthSelect = document.getElementById('depth');
        const statusDiv = document.getElementById('status');
        const nodesDiv = document.getElementById('nodes');
        const svg = document.getElementById('svg');
        const canvas = document.getElementById('canvas');

        // ã‚µãƒ³ãƒ—ãƒ«ã®å˜èªå€™è£œã¨ã‚¹ã‚³ã‚¢
        const vocabulary = [
            { word: "love", score: -0.5 },
            { word: "like", score: -1.2 },
            { word: "want", score: -1.5 },
            { word: "need", score: -1.8 },
            { word: "have", score: -2.0 }
        ];

        const vocabulary2 = [
            { word: "you", score: -0.3 },
            { word: "it", score: -0.8 },
            { word: "cats", score: -1.0 },
            { word: "dogs", score: -1.2 },
            { word: "music", score: -1.5 }
        ];

        const vocabulary3 = [
            { word: "very", score: -0.4 },
            { word: "so", score: -0.6 },
            { word: "too", score: -0.9 },
            { word: "a", score: -1.1 },
            { word: "the", score: -1.3 }
        ];

        const vocabulary4 = [
            { word: "much", score: -0.5 },
            { word: "well", score: -0.7 },
            { word: "good", score: -0.8 },
            { word: "nice", score: -1.0 },
            { word: "happy", score: -1.2 }
        ];

        const vocabByLevel = [vocabulary, vocabulary2, vocabulary3, vocabulary4];

        let searchTree = [];
        let currentStep = 0;
        const NODE_HEIGHT = 48; // Actual visible height of node with padding

        class Node {
            constructor(text, score, level, parent = null) {
                this.text = text;
                this.score = score;
                this.level = level;
                this.parent = parent;
                this.children = [];
                this.selected = false;
                this.eliminated = false;
                this.element = null;
                this.x = 0;
                this.y = 0;
            }
        }

        function resetSearch() {
            searchTree = [];
            currentStep = 0;
            nodesDiv.innerHTML = '';
            svg.innerHTML = '';
            statusDiv.textContent = '';
            
            // åˆæœŸãƒãƒ¼ãƒ‰
            const root = new Node("I", 0, 0);
            root.selected = true;
            searchTree.push([root]);
            
            renderTree();
        }

        function renderTree() {
            nodesDiv.innerHTML = '';
            svg.innerHTML = '';
            
            const levelWidth = 250;
            const nodeHeight = 80;
            const startX = 50;
            const startY = 50;
            const nodeWidth = 140;
            // Actual node height including padding and text (measured from actual rendered element)
            const nodeVerticalCenter = 24; // Half of actual node height (approximately 48px total)
            
            let maxWidth = 0;
            let maxHeight = 0;
            
            // First, determine positions and create nodes
            const nodePositions = [];
            
            searchTree.forEach((level, levelIndex) => {
                const x = startX + levelIndex * levelWidth;
                
                level.forEach((node, nodeIndex) => {
                    const y = startY + nodeIndex * nodeHeight;
                    
                    node.x = x;
                    node.y = y;
                    
                    maxWidth = Math.max(maxWidth, x + nodeWidth + 50);
                    maxHeight = Math.max(maxHeight, y + 50 + 50);
                    
                    nodePositions.push({
                        node: node,
                        x: x,
                        y: y
                    });
                    
                    // Create node element
                    const nodeDiv = document.createElement('div');
                    nodeDiv.className = `node absolute rounded-lg p-3 border-2 ${
                        node.selected ? 'bg-blue-100 border-blue-500' : 
                        node.eliminated ? 'bg-gray-200 border-gray-400' : 
                        'bg-white border-gray-300'
                    }`;
                    nodeDiv.style.left = x + 'px';
                    nodeDiv.style.top = y + 'px';
                    nodeDiv.style.width = nodeWidth + 'px';
                    
                    nodeDiv.innerHTML = `
                        <div class="font-bold text-sm">${node.text}</div>
                        <div class="text-xs text-gray-600">ã‚¹ã‚³ã‚¢: ${node.score.toFixed(2)}</div>
                    `;
                    
                    if (node.selected) {
                        nodeDiv.classList.add('selected');
                    }
                    if (node.eliminated) {
                        nodeDiv.classList.add('eliminated');
                    }
                    
                    nodesDiv.appendChild(nodeDiv);
                    node.element = nodeDiv;
                });
            });
            
            // Set canvas and SVG dimensions
            canvas.style.minWidth = maxWidth + 'px';
            canvas.style.minHeight = maxHeight + 'px';
            svg.setAttribute('width', maxWidth);
            svg.setAttribute('height', maxHeight);
            svg.style.width = maxWidth + 'px';
            svg.style.height = maxHeight + 'px';
            
            // Draw lines between connected nodes after a small delay to ensure elements are rendered
            setTimeout(() => {
                nodePositions.forEach(pos => {
                    if (pos.node.parent) {
                        const parent = pos.node.parent;
                        
                        // Line from parent's right edge center to child's left edge center
                        const startX = parent.x + nodeWidth;
                        const startY = parent.y + nodeVerticalCenter;
                        const endX = pos.x;
                        const endY = pos.y + nodeVerticalCenter;
                        
                        // Create a curved path
                        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        const midX = (startX + endX) / 2;
                        
                        // Use a cubic bezier curve for smooth connection
                        const d = `M ${startX},${startY} C ${midX},${startY} ${midX},${endY} ${endX},${endY}`;
                        
                        path.setAttribute('d', d);
                        path.setAttribute('stroke', pos.node.selected ? '#3b82f6' : '#d1d5db');
                        path.setAttribute('stroke-width', pos.node.selected ? '2' : '1');
                        path.setAttribute('fill', 'none');
                        path.classList.add('edge');
                        
                        if (pos.node.selected) {
                            path.classList.add('active');
                        }
                        
                        svg.appendChild(path);
                    }
                });
            }, 10);
        }

        async function performBeamSearch() {
            const beamWidth = parseInt(beamWidthSelect.value);
            const maxDepth = parseInt(depthSelect.value);
            
            startBtn.disabled = true;
            resetBtn.disabled = true;
            
            for (let depth = 1; depth <= maxDepth; depth++) {
                statusDiv.textContent = `ã‚¹ãƒ†ãƒƒãƒ— ${depth}: å€™è£œã‚’ç”Ÿæˆä¸­...`;
                await sleep(1000);
                
                const previousLevel = searchTree[searchTree.length - 1];
                const selectedNodes = previousLevel.filter(n => n.selected);
                
                const newLevel = [];
                
                // Generate children from selected nodes
                for (const parent of selectedNodes) {
                    const vocab = vocabByLevel[depth - 1] || vocabulary4;
                    vocab.forEach(item => {
                        const newText = parent.text + " " + item.word;
                        const newScore = parent.score + item.score + (Math.random() * 0.3 - 0.15);
                        const newNode = new Node(newText, newScore, depth, parent);
                        parent.children.push(newNode);
                        newLevel.push(newNode);
                    });
                }
                
                searchTree.push(newLevel);
                renderTree();
                
                await sleep(1000);
                
                statusDiv.textContent = `ã‚¹ãƒ†ãƒƒãƒ— ${depth}: ä¸Šä½${beamWidth}å€‹ã‚’é¸æŠä¸­...`;
                
                // Select top k nodes
                newLevel.sort((a, b) => b.score - a.score);
                
                for (let i = 0; i < newLevel.length; i++) {
                    if (i < beamWidth) {
                        newLevel[i].selected = true;
                    } else {
                        newLevel[i].eliminated = true;
                    }
                }
                
                renderTree();
                await sleep(1500);
            }
            
            const bestNode = searchTree[searchTree.length - 1].filter(n => n.selected)[0];
            statusDiv.textContent = `æ¢ç´¢å®Œäº†ï¼æœ€è‰¯ã®çµæœ: "${bestNode.text}"`;
            startBtn.disabled = false;
            resetBtn.disabled = false;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        startBtn.addEventListener('click', () => {
            resetSearch();
            performBeamSearch();
        });

        resetBtn.addEventListener('click', resetSearch);

        // åˆæœŸè¡¨ç¤º
        resetSearch();
    </script>
</body>
</html>